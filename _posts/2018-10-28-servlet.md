---
layout: post
title: '[Web] Servlet이란'
subtitle: 'Servlet의 개념과 동작 과정을 이해한다.'
date: 2018-10-28
author: heejeong Kwon
cover: '/images/web/web-main.png'
tags: spring web architecture servlet html-form
comments: true
sitemap :
  changefreq : daily
  priority : 1.0
---


## Goal
> - Web Service의 기본적인 동작 과정을 이해한다.
> - 사용자 입력을 위한 HTML Form을 이해한다.
> - Servlet을 이해한다.


## Web Service의 기본적인 동작 과정
<span style="background-color: #e1e1e1">**HTML Form -> Servlet -> HTML Page**</span>
![](/images/web/servlet-process.png)
1. 사용자가 웹 페이지 form(HTML Form)을 통해 자신의 정보를 입력한다. **(Input)**
2. Servlet의 doGet() 또는 doPost() 메서드는 입력한 form data에 맞게 DB 또는 다른 소스에서 관련된 정보를 검색한다.
3. 이 정보를 이용하여 사용자의 요청에 맞는 적절한 동적 컨텐츠(HTML Page)를 만들어서 제공한다. **(Output)**

## 1. HTML Form
### 클라이언트(browser)가 요청하는 URL 정보
* `요청을 보낼 서버의 IP 주소 : Port 번호 / App 이름 / 달라고 요청하는 HTML`
  * Ex) `localhost:8080/FormHandlingServlet/LoginForm.html`
* IP 주소
  * 요청을 보낼 서버의 "위치"를 의미한다.
  * browser와 WAS(Tomcat)가 같은 PC에 있으면 "IP 주소 = localhost"
* Port 번호
  * 해당 위치 안의 "특정 사람"을 의미한다.
* HTML 이름
  1. HTML 이름에 해당하는 HTML 문서를 받아온다.
  2. browser는 받아온 HTML 문서 안의 html 태그들(Ex. h2, br 등)을 parsing(기계어로 번역)한다.
  3. 마지막으로 이 내용을 browser에서 rendering(그리기)한다.

### LoginForm.html 내용 (간단한 예시)
```html
<form name="loginForm" method="post" action="loginServlet">
    Username: <input type="text" name="username"/> <br/>
    Password: <input type="password" name="password"/> <br/>
    <input type="submit" value="Login" />
</form>
```
* method="post"
  * 원하는 동작에 따라 HTTP 메서드를 사용한다.
  * method="get" 
* action="loginServlet"
  * URL of the servlet
  * 해당 URL로 request가 간다. 즉, WAS에서의 어떤 Servlet인지 지정하는 것
* type="submit"
  * 버튼을 누르면 사용자가 입력한 인자들이 Servlet으로 넘어간다.


## 2. Servlet이란 
### Servlet의 개념
* Server Side에서 돌아가는 Java Program
* 웹 기반의 요청에 대한 동적인 처리가 가능한 하나의 클래스
* 개발자가 작성해야 하는 부분

### Servlet의 메서드 구현 (간단한 예시)
```java
public class LoginServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response throws ServletException, IOException {
        // read form fields
        String username = request.getParameter("username");
        String password = request.getParameter("password");
         
        // get response writer
        PrintWriter writer = response.getWriter();
         
        // build HTML code
        String htmlResponse = "<html>";
        htmlResponse += "<h2>Your username is: " + username + "<br/>";      
        htmlResponse += "Your password is: " + password + "</h2>";    
        htmlResponse += "</html>";
         
        // return response
        writer.println(htmlResponse);         
    }
}
```
* HttpServletRequest request 객체
  * 사용자가 HTML Form에 입력한 내용(username과 password)을 request 객체에서 받아온다.
* HttpServletResponse response 객체
  * 인자의 내용에 맞게 동적인 HTML 코드를 생성하여 response 객체에 담아 반환한다.

* WAS
  * Servlet Container
  * Servlet의 life cycle을 담당한다.
  * 즉, WAS 위에서 Servlet이 돌아다고 개발자는 이 Servlet을 만들어야 한다.
  * 웹 브라우저 클라이언트의 요청이 들어왔을 때 객체 생성은 WAS가 알아서 처리한다.


    



# 관련된 Post
* Web Application Structure과 web.xml 설정 내용, 역할 및 간단한 예시에 대해 알고 싶으시면 [Web Application Structure 이해하기](https://gmlwjd9405.github.io/2018/10/29/web-application-structure.html)를 참고하시기 바랍니다.


<!-- # References
> - []() -->